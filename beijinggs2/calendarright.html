<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
	<title>北京纳税人网-日历备忘</title>
</head>
<body>
	<!--日历start-->
<div class="calMomobox">
	<div id ="taxCalendar">
		<div class="Calendar_top">
			<span id="idCalendarPre" class="calendarPre"></span> 
			<span class="Calendar_input"> 
				<span id="idCalendarYear"></span> 年 <span id="idCalendarMonth"></span> 月 
			</span> 
			<span id="idCalendarNext" class="calendarNext"></span>
		</div>
		<div class="caltitlebox" onclick="openCalDetail();"><span id="caltitle">征期查询</span> <a class="more" href="javascript:void(0);"></a></div>
		<table cellspacing="0" class="tb_date">
			<thead>
			<tr>
			<td>日</td>
			<td>一</td>
			<td>二</td>
			<td>三</td>
			<td>四</td>
			<td>五</td>
			<td>六</td>
			</tr>
			</thead>
			<tbody id="idCalendar" class="idCalendar"><!--id for js ,class for css-->
				<tr><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr>
				<tr><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr>
				<tr><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr>
				<tr><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr>
				<tr><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr>				
			</tbody>
		</table>
	</div>
	<!--日历end-->
	<!--备忘录-->
	<div id="memo" class="memo">
		<div class="date">11月8日</div>
		<div class="memolistbox">
			<ul id="memolist" class="memolist">
				<li>111111111111111111111111111111111111111111111111111111111111111111111111111111111111<span class="edit" onclick="editMemobox();">编辑/删除</span>
				</li>
				<li class="today">
					“2015年 11月20日”,进行 “增值税”申报缴税操作。税额“99999”元,所属期起“2015年 11月29日”到所属期止“2015年 12月 22日”<span class="edit" onclick="editMemobox();">编辑/删除</span>
				</li>
				<li>
					“2015年 11月20日”,进行 “增值税”申报缴税操作。税额“99999”元,所属期起“2015年 11月29日”到所属期止“2015年 12月 22日”<span class="edit" onclick="editMemobox();">编辑/删除</span>
				</li>
				<li>
					“2015年 11月20日”,进行 “增值税”申报缴税操作。税额“99999”元,所属期起“2015年 11月29日”到所属期止“2015年 12月 22日”<span class="edit" onclick="editMemobox();">编辑/删除</span>
				</li>
				<li class="today">
					“2015年 11月20日”,进行 “增值税”申报缴税操作。税额“99999”元,所属期起“2015年 11月29日”到所属期止“2015年 12月 22日”<span class="edit" onclick="editMemobox();">编辑/删除</span>
				</li>
			</ul>				
		</div>

		<div id="addmemo" onclick="addMemo();">
			<span>添加备注</span>
		</div>
	</div>
	<!--备忘录-->

		<!--备忘memostart-->
	<div id="memobox" class="memobox" style="display:none;">
		<div class="memotitle">添加备忘录</div>	
			<p>
				<span class="label">日期 :</span>
				<input id="actionDate" class="memotext" type="text">
				<input id="btnYes" type="button" class="gray" value="确定" readonly="true" onclick="saveMemo();">
			</p>
			<p>
				<span class="label">内容 :</span>
				<textarea id="memoContent" class="content memotext" placeholder="在此输入您的备忘事项 不能为空"></textarea>
			</p>
	</div>
	<!--备忘memoend-->
	<!--备忘录编辑/删除-start-->
	<div id="editmemobox" class="memobox" style="display:none;">
		<div class="memotitle">编辑/删除备忘录</div>	
		<p>
			<span class="label">日期 :</span>
			<input id="actionDate2" class="memotext" type="text">			
		</p>
		<p>
			<span class="label">内容 :</span>
			<textarea id="memoContent2" class="content memotext" placeholder="在此输入您的备忘事项 不能为空"></textarea>
		</p>
		<p style="width:310px;margin:0 auto;">
			<input id="btnDelete" type="button" class="red" value="删除"  onclick="deleteMemo();">
			<input id="btnEdit" type="button" value="保存" class="blue" onclick="editMemo();">
		</p>
	</div>
	<!--备忘录编辑/删除-end-->
</div>
<script type="text/javascript">
$(function  () {
	time({//加载日历
		tbodyId:"idCalendar",
		preBtn:"idCalendarPre",
		nextBtn:"idCalendarNext",
		yearId:"idCalendarYear",
		monthId:"idCalendarMonth",
		isZhenQI:false,
		isBeiWang:true			
	});
	$(".memolistbox").mCustomScrollbar();//备注list滚动条 
      
		$("#actionDate,#actionDate2").datepicker();	//调用日历插件
     
      /*添加键盘监听 Yesbtn变色*/
      $(document).on("keyup",function(){
      	//&&$("#actionDate").datepicker("",)
      		if($("#memoContent").val()!==""&&$("#actionDate").datepicker("getDate")!=null){
      			$("#btnYes").removeClass("gray").attr("readonly","false");
      		}else{
      			$("#btnYes").addClass("gray").attr("readonly","true");
      		}
      });



});

  //保存备忘
  function saveMemo(){
  	var valueDate =$("#actionDate").datepicker("getDate");
  	var valueContent =$("#memoContent").val();

  }
	//添加备注
	function addMemo(){
	     $.layer({
	        type: 1,
	        area:['740px','400px'],
	        title: false, //不显示标题,
        	border:[0],
        	shade:[0.5,"#000"],
        	shadeClose:true,
	        page: {
	        	dom:$('#memobox') //捕获的元素
	    	},
	        success:function(){
	        	$("#actionDate").datepicker("setDate",new Date);//默认当前日期
	        },
	        end: function(){
	           //清空
	           $("#actionDate").datepicker("setDate","");
	           $("#memoContent").val("");
	           $("#btnYes").addClass("gray").attr("readonly","true");
	        }
	    });     
	}
	//编辑/删除
	function editMemobox(){
	     $.layer({
	        type: 1,
	        area:['740px','430px'],
	        title: false, 
        	border:[0],
        	shade:[0.5,"#000"],
        	shadeClose:true,
	        page: {
	        	dom:$('#editmemobox') 
	    	},
	        success:function(){
	        	$("#actionDate2").datepicker("setDate",new Date);//获取改备忘录日期!!!待修改
	        	$("#memoContent2").val("");////获取改备忘录内容!!!待修改
	        },
	        end: function(){
	           //清空
	           $("#actionDate2").datepicker("setDate","");
	           $("#memoContent2").val("");
	           $("#btnDelete").val("删除");
	           $("#btnEdit").val("保存");
	        }
	    });     
	}

	var  deleteFlag = true,editFlag = true;
	//删除
	function deleteMemo(){
		if(deleteFlag){
			$("#btnDelete").val("确认删除");
			deleteFlag = false;
		}else{
			layer.closeAll();
			deleteFlag = true;
		}
		
	    
	}

	//编辑

	function editMemo(){
		if(editFlag){
			$("#btnEdit").val("确认保存");
			editFlag = false;
		}else{
			layer.closeAll();
			editFlag = true;
		}
	     
	}
</script>

</body>
</html>